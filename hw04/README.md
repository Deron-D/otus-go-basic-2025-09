# **Лекция №8: Выбор темы и организация проектной работы**
> _Golang_Developer_Basic_

## **Задание:**
Домашнее задание
Придумать свой проект для дальнейшей разработки

Цель:
Начать разработку своего проекта, чтобы применить знания которые будем получать в следующих лекциях курса.


Описание/Пошаговая инструкция выполнения домашнего задания:
Придумать свой проект, который вы будете разрабатывать дальше и который станет вашим курсовым проектом;
Со временем он должен будет уметь принимать запросы по API, проверять данные и сохранять их в файлах и потом в DB;
Отображать данные по запросам как списком так и по одному в формате json или protobuf;
Как вариант, он может состоять из более чем из одного микросервиса, которые могут быть соединены через брокер сообщений или gRPC;
Составить максимально подробное техническое задание описанное в readme.md вашего github репозитория.

Критерии оценки:
В файле readme.md вашего репозитория описано техническое задание проекта, который надо будет реализовать на протяжении курса;

Статус ""Принято"" ставится при выполнении всех критериев

---

## **Выполнено:**

Из предложенных https://github.com/OtusGolang/final_project_basic?tab=readme-ov-file 
выбран проект [HTTP-сервер для выдачи статических файлов](https://github.com/OtusGolang/final_project_basic/blob/master/05-static-server.md)

### ТЗ: HTTP-сервер для выдачи статических файлов

#### 1. Описание проекта

#### 1.1 Цель проекта

Разработка HTTP-сервера на Go, способного раздавать статические файлы (HTML, CSS, JavaScript, изображения и т.д.) клиентам в соответствии с запрошенным URL-путем.

#### 1.2 Ожидаемый результат

Готовый к развёртыванию сервис с помощью Docker, имеющий модульную структуру, тестовое покрытие и интерфейс для управления конфигурацией.

#### 2. Функциональные требования

#### 2.1. Основная функциональность (Раздача статики)

- Сервер должен обрабатывать HTTP-запросы методом GET.

- Сервер должен читать запрошенный URL-путь и искать соответствующий файл в заданной корневой директории.

- При нахождении файла сервер должен:

    - Отправлять файл клиенту.

    - Устанавливать корректный заголовок Content-Type (MIME-тип) в зависимости от расширения файла (например, text/html, text/css, image/png).

    - Возвращать HTTP-статус 200 OK.

- Конкурентность: Сервер должен быть способен обслуживать несколько клиентов одновременно без блокировок, используя встроенные возможности Go (goroutines).

#### 2.2. Управление конфигурацией (Настройки)

- Программа должна принимать два обязательных параметра для запуска:

    - --port / PORT: Порт, на котором будет запущен HTTP-сервер (например, 8080).

    - --path / STATIC_PATH: Абсолютный или относительный путь к корневой директории, откуда будут раздаваться статические файлы (например, ./public).

- Реализация: Конфигурация должна быть доступна через консольные аргументы (для ручного запуска) или переменные окружения (для Docker).

#### 3. Требования к обработке ошибок

Сервер должен корректно обрабатывать исключительные ситуации и возвращать соответствующие HTTP-статусы:

| Ситуация | HTTP-Статус | Код | Дополнительные действия |
| :--- | :--- | :--- | :--- |
| **Файл не найден** | `Not Found` | `404` | Сервер должен вернуть файл `404.html` из статической директории (если он существует), или кастомный JSON/текстовый ответ. |
| **Неверный запрос** | `Bad Request` | `400` | Возвращается, если запрос некорректно сформирован (например, недопустимые символы в пути). |
| **Ошибка сервера** | `Internal Server Error` | `500` | Возвращается в случае сбоя при чтении файла из файловой системы или другой внутренней проблемы. |

#### 4. Архитектура и разделение на слои

Проект должен быть разделён на логические пакеты/слои для обеспечения чистоты и тестируемости кода:

- Транспортный слой (`handler / server`): Содержит логику обработки HTTP-запросов, маршрутизацию и вызовы бизнес-логики.

- Слой бизнес-логики (`core / service`): Содержит алгоритм поиска файла, определение MIME-типа и обработку ошибок.

- Слой хранения (`storage / repository`): Содержит низкоуровневую логику взаимодействия с файловой системой (os, io) для чтения файлов.

- Конфигурация (`config`): Обработка аргументов командной строки и переменных окружения.

#### 5. Требования к развертыванию (Docker)

#### 5.1  Dockerfile

- Создать оптимизированный Dockerfile для сборки Go-приложения (рекомендуется использовать multi-stage сборку для уменьшения размера итогового образа).

#### 5.2. Docker Compose

- Создать файл docker-compose.yml для развертывания сервиса.

- docker-compose должен:

  - Собрать образ.

  - Пробросить порт с контейнера на хост.

  - Использовать volumes для монтирования локальной папки со статическими файлами внутрь контейнера.

  - Передавать переменные окружения (PORT, STATIC_PATH).

#### 6. Требования к тестированию

Тестирование — критически важная часть проекта.

#### 6.1. Юнит-тесты

- Покрытие Core логики: Написать юнит-тесты для алгоритмов в слое бизнес-логики (например, функция определения MIME-типа, функция обработки путей).

- Тесты на конфигурацию: Проверить, что модуль конфигурации корректно считывает настройки по умолчанию и из переменных окружения/аргументов.

#### 6.2. Интеграционные тесты

- Тестирование на транспортном уровне: Использовать пакеты, такие как net/http/httptest (в случае чистого net/http) или возможности Gin/другого фреймворка, для имитации HTTP-запросов.

  - Проверить успешную загрузку index.html (статус 200).

  - Проверить загрузку разных типов файлов (.css, .js).

  -  Проверить корректный возврат 404 Not Found для несуществующего файла.

- Тестирование на уровне хранения: Проверить, что слой хранения корректно обрабатывает ошибки файловой системы (например, ошибка доступа или несуществующая папка).

#### 6.3. Покрытие

- Тесты должны быть адекватны и по возможности полностью покрывать функциональность (стремиться к покрытию в 70% и выше).
